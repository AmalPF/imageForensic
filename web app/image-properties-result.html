{% extends 'image-properties-result-base.html' %} 

{% block script %}
<script>
    
    $(document).ready(function() {

        const ctx = document.getElementById('BarChart').getContext('2d');

        var y_values = JSON.parse("{{ result.histogram }}");
        var tooltip_labels = []

        var value_labels = [];
        for (let i = 0; i < 256; i++) {
            value_labels.push(i.toString());
            tooltip_labels.push(i.toString() + " - " + y_values[i]);
        }

        const chart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: value_labels,
                    datasets: [{
                        label: 'No.of Pixels',
                        data: y_values,
                        backgroundColor: 'green',
                    }]
                },
                options: {
                    scales: {
                        //x: {
                        //    display: false
                        //},
                        xAxes: [
                            {
                                display: false,
                                barPercentage: 1.3,
                                ticks: {
                                    max: 16,
                                }
                            }, {
                                display: true,
                                ticks: {
                                    autoSkip: true,
                                    max: 32,
                                }
                        }],
                        yAxes: [{
                            ticks: {
                                beginAtZero: true
                            }
                        }]
                    },
                    
                    legend: {
                        display: false
                    },
                    tooltips: {
                        callbacks: {
                        label: function(tooltipItem) {
                                return tooltipItem.tooltip_labels;
                        }
                        }
                    }
                }
            });

    });
    


    $(document).ready(function() {

        var colorCanvas = document.getElementById("LineChart");

        Chart.defaults.global.defaultFontFamily = "Lato";
        Chart.defaults.global.defaultFontSize = 18;

        var y_values1 = [1]; //JSON.parse("{{ result.rgb_graph }}");
        var y_values2 = [2]; //JSON.parse("{{ result.rgb_graph.green }}");
        var y_values3 = [3]; //JSON.parse("{{ result.rgb_graph.blue }}");
        
        console.log("{{ result.rgb_graph }}");
        console.log(y_values1);
        
        var value_labels = [];
        for (let i = 0; i < 256; i++) {
            value_labels.push(i.toString());
            //tooltip_labels.push(i.toString() + " - " + y_values[i]);
        }

        var red = {
            label: "Channel Red",
            data: y_values1,
            lineTension: 0,
            fill: false,
            borderColor: 'red'
        };

        var green = {
            label: "Channel Green",
            data: y_values2,
            lineTension: 0,
            fill: false,
        borderColor: 'green'
        };

        var blue = {
            label: "Channel Blue",
            data: y_values3,
            lineTension: 0,
            fill: false,
        borderColor: 'blue'
        };

        var colorData = {
            labels: value_labels,
            datasets: [red, green, blue]
        };

        var chartOptions = {
            legend: {
                display: false
            }
        };

        var lineChart = new Chart(colorCanvas, {
            type: 'line',
            data: colorData,
            options: chartOptions
        });

    });


</script>
{% endblock script %} 

{% block content %}
    <canvas id="BarChart"></canvas>
{% endblock content %}

{% block content2 %}
    <canvas id="LineChart"></canvas>
{% endblock content2 %}